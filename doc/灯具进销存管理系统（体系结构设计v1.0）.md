# 灯具进销存管理系统（体系结构设计v1.0）

## 学院

南京大学软件学院

# 成员

乐盛捷，胡本霖，仲于芯，朱雨欣

# 目录

[TOC]

# 更新历史

# 1.引言

## 1.1编制目的

本报告详细完成对灯具进销存管理系统（Management System of Lamps）的概要设计，达到指导详细设计和开发的目的，同时实现和测试人员及用户的沟通。

本报告面向开发人员、测试人员及最终用户而编写，是了解系统的导航。

## 1.2词汇表

| 词汇名称  |   词汇含义    |  备注  |
| :---: | :-------: | :--: |
|  MSL  | 灯具进销存管理系统 |      |
|  _ui  |   某展示层    |      |
|  _bl  |   某逻辑层    |      |
| _data |   某数据层    |      |


## 1.3参考资料

1.IEEE 标准

2.《软件工程与计算（卷二）》附录D.3 连锁商店管理系统（MSCS）软件体系结构描述文档


# 2.产品概述

  灯具进销存管理系统是一民营企业聘请公司s开发的一套进销存系统，旨在适应新的市场环境，提高工作效率和用户满意度，由于现公司规模扩大，企业业务量、办公场所、员工数都发生增长，灯具进销存管理系统能够减少挤压库存，增加销售额，提高用户工作效率。

# 3.逻辑视角

  灯具进销存管理系统MSL中，选择了分层体系结构风格，将系统分成3层（展示层、业务逻辑层、数据层）能够很好地示意整个高层抽象。展示层包含GUI页面的实现，业务逻辑层包含业务逻辑处理的实现，数据层负责数据的持久化和访问。分层体系结构的逻辑视⻆角和逻辑设计⽅方案如图 3-1 和图 3-2 所示。 

* 图 3-1 参照体系结构风格的包图表达逻辑视角

![图 3-1](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE%203-1.png)

* 图 3-2 软件体系结构逻辑设计方案

![图 3-2](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE%203-2.png)

# 4.组合视角

## 4.1 开发包图

灯具进销存管理系统的最终开发包设计如表 4.1-1所示

- 表 4.1-1 灯具进销存管理系统的最终开发包设计

| 开发（物理）包                   | 依赖的其他开发包                                 |
| ------------------------- | ---------------------------------------- |
| mainui                    | inventoryui,customerui,salesui,accountui,financeui,userui,goodsui,initializationui,examinationui,promotionui,vo |
| inventoryui               | inventoryblservice,界面类库包,vo              |
| inventoryblservice        |                                          |
| inventorybl               | inventoryblservice,inventorydataservice,goodsbl |
| inventorydataservice      | Java RMI,po                              |
| inventorydata             | inventorydataservice,po,databaseutility  |
| customerui                | customerblservice,界面类库包,vo               |
| customerblservice         |                                          |
| customerbl                | customerblservice,customerdataservice    |
| customerdataservice       | Java RMI,po                              |
| customerdata              | customerdataservice,po,databaseutility   |
| salesui                   | salesblservice,界面类库包,vo                  |
| salesblservice            |                                          |
| salesbl                   | salesblservice,salesdataservice,userbl,customerbl,inventorybl,promotionbl,goodsbl |
| salesdataservice          | Java RMI,po                              |
| salesdata                 | salesdataservice,po,databaseutility      |
| accountui                 | accountblservice,界面类库包,vo                |
| accountblservice          |                                          |
| accountbl                 | accountblservice,accountdataservice      |
| accountdataservice        | Java RMI,po                              |
| accountdata               | accountdataservice,po,databaseutility    |
| financeui                 | financeblservice,界面类库包,vo                |
| financeblservice          |                                          |
| financebl                 | financeblservice,financedataservice,goodsbl,customerbl,accountbl,userbl,inventorybl, |
| financedataservice        | Java RMI,po                              |
| financedata               | financedataservice,po,databaseutility    |
| userui                    | userblservice,界面类库包,vo                   |
| userblservice             |                                          |
| userbl                    | userblservice,userdataservice            |
| userdataservice           | Java RMI,po                              |
| userdata                  | userdataservice,po,databaseutility       |
| goodsui                   | goodsblservice,界面类库包,vo                  |
| goodsblservice            |                                          |
| goodsbl                   | goodsblservice,goodsdataservice          |
| goodsdataservice          | Java RMI,po                              |
| goodsdata                 | goodsdataservice,po,databaseutility      |
| initializationui          | initializationblservice,界面类库包,vo         |
| initializationblservice   |                                          |
| initializationbl          | initializationblservice,initializationbl,accountbl,customerbl,goodsbl |
| initializationdataservice | Java RMI,po                              |
| initializationdata        | initializationdataservice,po,databaseutility |
| examinationui             | examinationblservice,界面类库包,vo            |
| examinationblservice      |                                          |
| examinationbl             | examinationblservice,examinationdataservice,financebl,salsbl,inventorybl |
| examinationdataservice    | Java RMI,po                              |
| examinationdata           | examinationdataservice,po,databaseutility |
| promotionui               | promotionblservice,界面类库包,vo              |
| promotionblservice        |                                          |
| promotionbl               | promotionblservice,promotiondataservice  |
| promotiondataservice      | Java RMI,po                              |
| promotiondata             | promotiondataservice,po,databaseutility  |
| vo                        |                                          |
| po                        |                                          |
| utilitybl                 |                                          |
| 界面类库包                     | javafx                                   |
| Java RMI                  |                                          |
| databaseutili             | JDBC                                     |

灯具进销存管理系统客户端开发包如图 4.1-1所示，服务器端开发包如图 4.1-2所示。

* 图 4.1-1 灯具进销存管理系统客户端开发包图

![图 4.1-1](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BC%80%E5%8F%91%E5%8C%85%E5%9B%BE.png)

* 图 4.1-2 灯具进销存管理系统服务器端开发包图

![图 4.1-2](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%BC%80%E5%8F%91%E5%8C%85%E5%9B%BE.png)

## 4.2 运行时进程

在灯具进销存管理系统中，会有多个客户端进程和一个服务器端进程， 其进程图如图 4.2-1所示。结合部署图，客户端进程是在客户端机器上运行，服务器端进程在服务器端机器上运行。

* 图 4.2-1 进程图

![图 4.2-1](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE%204.2-1.png)

## 4.3 物理部署

灯具进销存管理系统中客户端构件是放在客户端机器上，服务器端构件是放在服务器端机器上。在客户端节点上，还要部署RMIStub 构件。由于Java RMI 构件属于JDK 8.0 的一部分。所以，在系统JDK环境已经设置好的情况下，不需要再独立部署。部署图如图4.3-1所示。

* 图 4.3-1 部署图

![图 4.3-1](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE%204.3-1.png)

# 5.接口视角

## 5.1 模块的职责

客户端模块和服务器端模块视图分别如图5.1-1和图5.1-2所示。客户端各层和服务器端各层的职责分表如表5.1-1和表5.1-2所示。

* 图 5.1-1 客户端模块视图

![图 5.1-1](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%A8%A1%E5%9D%97%E8%A7%86%E5%9B%BE.png)

* 图 5.1-2 服务器端模块视图

  ![图 5.1-2](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%A8%A1%E5%9D%97%E8%A7%86%E5%9B%BE.png)

* 表 5.1-1  客户端各层的职责

| 层       | 职责                   |
| ------- | -------------------- |
| 启动模块    | 负责初始化网络通信机制，启动用户界面   |
| 用户界面层   | 基于窗口的灯具进销存管理系统用户界面   |
| 业务逻辑层   | 对于用户界面的输入响应和业务处理逻辑   |
| 客户端网络模块 | 利用Java RMI 机制查找RMI服务 |
  ​  

* 表 5.1-2 服务器端各层的职责

| 层        | 职责                          |
| -------- | --------------------------- |
| 启动模块     | 负责初始化网络通信机制，启动用户界面          |
| 数据层      | 负责数据的持久化及数据访问接口             |
| 服务器端网络模块 | 利用Java RMI机制开启RMI服务，注册RMI服务 |

  每一层只是使用下方直接解除的层。层与层之间仅仅是通过接口的调用来完成的。层之间调用的接口如表5.1-3所示。

* 表 5.1-3  层之间调用的接口

| 接口                                       | 服务调用方    | 服务提供方    |
| ---------------------------------------- | -------- | -------- |
| InventoryBLService<br>CustomerBLService<br>SalesBLService<br>AccountBLService<br>FinanceBLService<br>UserBLService<br>GoodsBLService<br>InitializationBLService<br>ExaminationBLService<br> | 客户端展示层   | 客户端业务逻辑层 |
| InventoryDataService<br>CustomerDataService<br>SalesDataService<br>AccountDataService<br>FinanceDataService<br>UserDataService<br>GoodsDataService<br>ExaminationDataService<br>PromotionDataService<br>DatabaseFactory<br> | 客户端业务逻辑层 | 服务器端数据层  |

## 5.2 用户界面层的分解

根据需求，系统存在28个用户界面：登录界面、库存管理人员主界面、财务人员主界面、进货销售人员主界面、总经理主界面、管理员主界面、查看商品分类界面、查看商品界面、查看库存界面、制定库存报溢单界面、制定库存报损单界面、盘点库存界面、制定收款单界面、制定付款单界面、制定现金费用单界面、期初建账界面、管理账户界面、查看经营情况表界面、查看经营历程表界面、查看销售明细表界面、管理客户界面、制定进货单界面、制定退货单界面、制定销售出货单界面、制定销售退货单界面、制定促销策略界面、审批单据界面、管理用户账户和权限界面。界面跳转如图 5.2-1所示。

* 图 5.2-1 用户界面跳转

![图 5.2-1](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE%205.2-1.png)

服务器端和客户端的用户界面设计接口是一致的，只是具体的页面不一样。用户界面类如图 5.2-2所示。

* 图 5.2-2 用户界面类

  ![图 5.2-2](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE%205.2-2.png)

### 5.2.1 用户界面层模块的职责

### 5.2.2 用户界面层模块的接口规范

### 5.2.3 用户界面层模块设计原理

## 5.3 业务逻辑层的分解

### 5.3.1业务逻辑层模块的职责

### 5.3.2 业务逻辑层模块的接口规范
## 5.4 数据层的分解

### 5.4.1 数据层模块的职责

### 5.4.2 数据层模块的接口规范

# 6. 信息视角

## 6.1 数据持久化对象

## 6.2 数据库表
