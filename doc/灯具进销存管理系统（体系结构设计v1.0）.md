# 灯具进销存管理系统（体系结构设计v1.0）

## 学院

南京大学软件学院

# 成员

乐盛捷，胡本霖，仲于芯，朱雨欣

# 目录

[TOC]

# 更新历史

# 1.引言

## 1.1编制目的

本报告详细完成对灯具进销存管理系统（Management System of Lamps）的概要设计，达到指导详细设计和开发的目的，同时实现和测试人员及用户的沟通。

本报告面向开发人员、测试人员及最终用户而编写，是了解系统的导航。

## 1.2词汇表

| 词汇名称  |   词汇含义    |  备注  |
| :---: | :-------: | :--: |
|  MSL  | 灯具进销存管理系统 |      |
|  _ui  |   某展示层    |      |
|  _bl  |   某逻辑层    |      |
| _data |   某数据层    |      |


## 1.3参考资料

1.IEEE 标准

2.《软件工程与计算（卷二）》附录D.3 连锁商店管理系统（MSCS）软件体系结构描述文档


# 2.产品概述

  灯具进销存管理系统是一民营企业聘请公司s开发的一套进销存系统，旨在适应新的市场环境，提高工作效率和用户满意度，由于现公司规模扩大，企业业务量、办公场所、员工数都发生增长，灯具进销存管理系统能够减少挤压库存，增加销售额，提高用户工作效率。

# 3.逻辑视角

  灯具进销存管理系统MSL中，选择了分层体系结构风格，将系统分成3层（展示层、业务逻辑层、数据层）能够很好地示意整个高层抽象。展示层包含GUI页面的实现，业务逻辑层包含业务逻辑处理的实现，数据层负责数据的持久化和访问。分层体系结构的逻辑视⻆角和逻辑设计⽅方案如图 3-1 和图 3-2 所示。 

* 图 3-1 参照体系结构风格的包图表达逻辑视角

![图 3-1](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE%203-1.png)

* 图 3-2 软件体系结构逻辑设计方案

![图 3-2](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE%203-2.png)

# 4.组合视角

## 4.1 开发包图

灯具进销存管理系统的最终开发包设计如表 4.1-1所示

- 表 4.1-1 灯具进销存管理系统的最终开发包设计

| 开发（物理）包                   | 依赖的其他开发包                                 |
| ------------------------- | ---------------------------------------- |
| mainui                    | inventoryui,customerui,salesui,accountui,financeui,userui,goodsui,initializationui,examinationui,promotionui,vo |
| inventoryui               | inventoryblservice,界面类库包,vo              |
| inventoryblservice        |                                          |
| inventorybl               | inventoryblservice,inventorydataservice,goodsbl |
| inventorydataservice      | Java RMI,po                              |
| inventorydata             | inventorydataservice,po,databaseutility  |
| classificationui          | classificationblservice,界面类库包,vo         |
| classificationblservice   |                                          |
| classificationbl          | classificationblservice，classficationdataservice |
| classificationdataservice | Java RMI,po                              |
| classificationdata        | classificationdataservice,po,databaseutility |
| customerui                | customerblservice,界面类库包,vo               |
| customerblservice         |                                          |
| customerbl                | customerblservice,customerdataservice    |
| customerdataservice       | Java RMI,po                              |
| customerdata              | customerdataservice,po,databaseutility   |
| salesui                   | salesblservice,界面类库包,vo                  |
| salesblservice            |                                          |
| salesbl                   | salesblservice,salesdataservice,userbl,customerbl,inventorybl,promotionbl,goodsbl |
| salesdataservice          | Java RMI,po                              |
| salesdata                 | salesdataservice,po,databaseutility      |
| accountui                 | accountblservice,界面类库包,vo                |
| accountblservice          |                                          |
| accountbl                 | accountblservice,accountdataservice      |
| accountdataservice        | Java RMI,po                              |
| accountdata               | accountdataservice,po,databaseutility    |
| financeui                 | financeblservice,界面类库包,vo                |
| financeblservice          |                                          |
| financebl                 | financeblservice,financedataservice,goodsbl,customerbl,accountbl,userbl,inventorybl, |
| financedataservice        | Java RMI,po                              |
| financedata               | financedataservice,po,databaseutility    |
| userui                    | userblservice,界面类库包,vo                   |
| userblservice             |                                          |
| userbl                    | userblservice,userdataservice            |
| userdataservice           | Java RMI,po                              |
| userdata                  | userdataservice,po,databaseutility       |
| goodsui                   | goodsblservice,界面类库包,vo                  |
| goodsblservice            |                                          |
| goodsbl                   | goodsblservice,goodsdataservice,classificationbl |
| goodsdataservice          | Java RMI,po                              |
| goodsdata                 | goodsdataservice,po,databaseutility      |
| initializationui          | initializationblservice,界面类库包,vo         |
| initializationblservice   |                                          |
| initializationbl          | initializationblservice,initializationbl,accountbl,customerbl,goodsbl |
| initializationdataservice | Java RMI,po                              |
| initializationdata        | initializationdataservice,po,databaseutility |
| examinationui             | examinationblservice,界面类库包,vo            |
| examinationblservice      |                                          |
| examinationbl             | examinationblservice,examinationdataservice,financebl,salsbl,inventorybl |
| examinationdataservice    | Java RMI,po                              |
| examinationdata           | examinationdataservice,po,databaseutility |
| promotionui               | promotionblservice,界面类库包,vo              |
| promotionblservice        |                                          |
| promotionbl               | promotionblservice,promotiondataservice  |
| promotiondataservice      | Java RMI,po                              |
| promotiondata             | promotiondataservice,po,databaseutility  |
| vo                        |                                          |
| po                        |                                          |
| utilitybl                 |                                          |
| 界面类库包                     | javafx                                   |
| Java RMI                  |                                          |
| databaseutili             | JDBC                                     |

灯具进销存管理系统客户端开发包如图 4.1-1所示，服务器端开发包如图 4.1-2所示。

* 图 4.1-1 灯具进销存管理系统客户端开发包图

![图 4.1-1](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BC%80%E5%8F%91%E5%8C%85%E5%9B%BE.png)

* 图 4.1-2 灯具进销存管理系统服务器端开发包图

![图 4.1-2](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%BC%80%E5%8F%91%E5%8C%85%E5%9B%BE.png)

## 4.2 运行时进程

在灯具进销存管理系统中，会有多个客户端进程和一个服务器端进程， 其进程图如图 4.2-1所示。结合部署图，客户端进程是在客户端机器上运行，服务器端进程在服务器端机器上运行。

* 图 4.2-1 进程图

![图 4.2-1](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE%204.2-1.png)

## 4.3 物理部署

灯具进销存管理系统中客户端构件是放在客户端机器上，服务器端构件是放在服务器端机器上。在客户端节点上，还要部署RMIStub 构件。由于Java RMI 构件属于JDK 8.0 的一部分。所以，在系统JDK环境已经设置好的情况下，不需要再独立部署。部署图如图4.3-1所示。

* 图 4.3-1 部署图

![图 4.3-1](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE%204.3-1.png)

# 5.接口视角

## 5.1 模块的职责

客户端模块和服务器端模块视图分别如图5.1-1和图5.1-2所示。客户端各层和服务器端各层的职责分表如表5.1-1和表5.1-2所示。

* 图 5.1-1 客户端模块视图

![图 5.1-1](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%A8%A1%E5%9D%97%E8%A7%86%E5%9B%BE.png)

* 图 5.1-2 服务器端模块视图

  ![图 5.1-2](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%A8%A1%E5%9D%97%E8%A7%86%E5%9B%BE.png)

* 表 5.1-1  客户端各层的职责

| 层       | 职责                   |
| ------- | -------------------- |
| 启动模块    | 负责初始化网络通信机制，启动用户界面   |
| 用户界面层   | 基于窗口的灯具进销存管理系统用户界面   |
| 业务逻辑层   | 对于用户界面的输入响应和业务处理逻辑   |
| 客户端网络模块 | 利用Java RMI 机制查找RMI服务 |
  ​  

* 表 5.1-2 服务器端各层的职责

| 层        | 职责                          |
| -------- | --------------------------- |
| 启动模块     | 负责初始化网络通信机制，启动用户界面          |
| 数据层      | 负责数据的持久化及数据访问接口             |
| 服务器端网络模块 | 利用Java RMI机制开启RMI服务，注册RMI服务 |

  每一层只是使用下方直接解除的层。层与层之间仅仅是通过接口的调用来完成的。层之间调用的接口如表5.1-3所示。

* 表 5.1-3  层之间调用的接口

| 接口                                       | 服务调用方    | 服务提供方    |
| ---------------------------------------- | -------- | -------- |
| InventoryBLService<br>CustomerBLService<br>SalesBLService<br>AccountBLService<br>FinanceBLService<br>UserBLService<br>GoodsBLService<br>ClassificationBLService<br>InitializationBLService<br>ExaminationBLService<br>PromotionBLService<br> | 客户端展示层   | 客户端业务逻辑层 |
| InventoryDataService<br>CustomerDataService<br>SalesDataService<br>AccountDataService<br>FinanceDataService<br>UserDataService<br>GoodsDataService<br>ClassificationDataService<br>ExaminationDataService<br>PromotionDataService<br>DatabaseFactory<br> | 客户端业务逻辑层 | 服务器端数据层  |

## 5.2 用户界面层的分解

根据需求，系统存在28个用户界面：登录界面、库存管理人员主界面、财务人员主界面、进货销售人员主界面、总经理主界面、管理员主界面、查看商品分类界面、查看商品界面、查看库存界面、制定库存报溢单界面、制定库存报损单界面、盘点库存界面、制定收款单界面、制定付款单界面、制定现金费用单界面、期初建账界面、管理账户界面、查看经营情况表界面、查看经营历程表界面、查看销售明细表界面、管理客户界面、制定进货单界面、制定退货单界面、制定销售出货单界面、制定销售退货单界面、制定促销策略界面、审批单据界面、管理用户账户和权限界面。界面跳转如图 5.2-1所示。

* 图 5.2-1 用户界面跳转

![图 5.2-1](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE%205.2-1.png)

服务器端和客户端的用户界面设计接口是一致的，只是具体的页面不一样。用户界面类如图 5.2-2所示。

* 图 5.2-2 用户界面类

  ![图 5.2-2](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE%205.2-2.png)

### 5.2.1 用户界面层模块的职责

如表 5.2.1-1所示为用户界面层模块的职责。

* 表 5.2.1-1 用户界面层模块的职责

| 模块        | 职责                    |
| --------- | --------------------- |
| MainFrame | 界面Frame，负责界面的显示和界面的跳转 |

### 5.2.2 用户界面层模块的接口规范

用户界面层模块的接口规范如表 5.2.1-2所示。

- 表 5.2.1-2 用户界面层模块的接口规范

| 服务名                                 | 服务                |
| ----------------------------------- | ----------------- |
| businesslogicservice.LoginBLService | 登录界面的业务逻辑接口       |
| businesslogicservice.*BLService     | 每个界面都有一个相应的业务逻辑接口 |

### 5.2.3 用户界面层模块设计原理

用户界面利用Java的 JavaFX来实现。

## 5.3 业务逻辑层的分解
业务逻辑层包括多个针对界⾯面的业务逻辑处理理对象。

* 图5.3-1 业务逻辑层分解图

![图5.3-1](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E5%B1%82%E5%88%86%E8%A7%A3%E5%9B%BE%205.3-1.png)

### 5.3.1业务逻辑层模块的职责
| 模块               | 职责                    |
| ---------------- | --------------------- |
| inventorybl      | 负责实现库存单据界面所需要的服务      |
| customerbl       | 负责实现客户管理界面所需要的服务      |
| salesbl          | 负责实现销售界面所需要服务         |
| accountbl        | 负责实现公司银行账户界面所需要的服务    |
| financebl        | 负责实现现金管理、查看表单界面所需要的服务 |
| userbl           | 负责实现用户管理界面所需要的界面      |
| goodsbl          | 负责实现商品、商品管理所需要的服务     |
| classificationbl | 负责商品分类、商品分类管理所需要的服务   |
| initializationbl | 负责期初建账界面所需要的服务        |
| examinationbl    | 负责审批单据界面所需要的服务        |
| promotionbl      | 负责促销策略界面所需要的服务        |

### 5.3.2 业务逻辑层模块的接口规范
* 表 5.3.2-1 inventorybl模块的接口规范
<table>
  <tr>
  	<th colspan="3" align="center">提供的服务（供接口）</th>
  </tr>
  <tr>
    	<td rowspan="3">Inventory.view</td>
        <td>语法</td>
        <td>public InventoryViewVO view(Date startDate, Date endDate, String inventory);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>日期和仓库输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>显示在此时间段内的出／入库数量／金额，销售／进货数量／金额，以及库存合计</td>
    </tr>
  <tr>
    	<td rowspan="3">Inventory.check</td>
        <td>语法</td>
        <td>public InventoryCheckVO check(Date today);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>日期输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>展示当天的库存快照</td>
    </tr>
  <tr>
    	<td rowspan="3">Inventory.ouputExcel</td>
        <td>语法</td>
        <td>public ResultMessage ouputExcel(InventoryCheckVO);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>已进行库存盘点</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>导出Excel表格到本地</td>
    </tr>
  <tr>
    	<td rowspan="3">Inventory.showBills</td>
        <td>语法</td>
        <td>public ArrayList&lt;InventoryBillVO&gt; showBills();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>以库存管理人员身份登录</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>返回所有报溢/报损单信息</td>
    </tr>
  <tr>
    	<td rowspan="3">Inventory.searchBill</td>
        <td>语法</td>
        <td>public ArrayList&lt;InventoryBillVO&gt; searchBill(Date startDate, Date endDate, String inventory, String id, String keyword);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>日期、仓库名、单据ID和关键字输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>返回所有符合搜索条件的单据</td>
    </tr>
  <tr>
    	<td rowspan="3">Inventory.addOverflowBill</td>
        <td>语法</td>
        <td>public ResultMessage addOverflowBill(InventoryBillVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>库存报溢单信息输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>生成库存报溢单草稿，持久化更新涉及的对象的数据</td>
    </tr>
  <tr>
    	<td rowspan="3">Inventory.addLossBill</td>
        <td>语法</td>
        <td>public ResultMessage addLossBill(InventoryBillVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>库存报损单信息输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>生成库存报损单草稿，持久化更新涉及的对象的数据</td>
    </tr>
  <tr>
    	<td rowspan="3">Inventory.deleteBill</td>
        <td>语法</td>
        <td>public ResultMessage deleteBill(String id);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>单据ID输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>删除库存单据草稿，持久化更新涉及的对象的数据</td>
    </tr>
  <tr>
    	<td rowspan="3">Inventory.showBillDetails</td>
        <td>语法</td>
        <td>public InventoryBillVO showBillDetails(String id);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>单据ID输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>返回该单据的详细信息</td>
    </tr>
  <tr>
    	<td rowspan="3">Inventory.submitBill</td>
        <td>语法</td>
        <td>public ResultMessage submitBill(String id);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>单据已保存为草稿</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>更改单据状态为提交状态，持久化更新涉及的对象的数据</td>
    </tr>

    <tr>
    	<th colspan="3" align="center">需要的服务（需接口）</th>
    </tr>
    <tr>
    <th>服务名</th>
    <th colspan="2">服务</th>
    </tr>
    <tr>
    <td>Inventory.findBill(String id)</td>
    <td colspan="2">根据ID查找单一持久化对象</td>
    </tr>
    <tr>
    <td>Inventory.addBill(InventoryBillPO po)</td>
    <td colspan="2">添加单一持久化对象</td>
    </tr>
    <tr>
    <td>Inventory.deleteBill(InventoryBillPO po)</td>
    <td colspan="2">删除单一持久化对象</td>
    </tr>
    <tr>
    <td>Inventory.updateBill(InventoryBillPO po)</td>
    <td colspan="2">修改单一持久化对象</td>
    </tr>
</table>
  
* 表5.3.2-2 customerbl模块的接口规范

<table>

<tr>

    <th colspan="3" align="center">提供的服务（供接口）</th>

</tr>

<tr>

  	<td rowspan="3">Customer.addCustomer</td>

      <td>语法</td>
      <td>public ResultMessage addCustomer(String kind,String level,String name,String phoneNumber,String address,String postcode,String mail,UserVO salesman)</td></tr>

  <tr>

  	<td>前置条件</td>

      <td>输入的类型、姓名、电话、地址、邮编、电子邮箱符合输入条件</td></tr>

  <tr>

 		<td>后置条件</td>

      <td>添加客户，持久化更新涉及的对象的数据</td>

  </tr>

<tr>

  	<td rowspan="3">Customer.deleteCustomer</td>

      <td>语法</td>
      <td>public ResultMessage deleteCustomer(String name)</td></tr>

  <tr>

  	<td>前置条件</td>

      <td>输入的客户姓名符合输入条件</td></tr>

  <tr>

 		<td>后置条件</td>

      <td>删除客户，持久化更新涉及的对象的数据</td>

  </tr>
<tr>

  	<td rowspan="3">Customer.findCustomer</td>

      <td>语法</td>
      <td>public ResultMessage findCustomer(String keywords,long customerId)</td></tr>

  <tr>

  	<td>前置条件</td>

      <td>输入的关键字符合条件，输入的客户编号符合条件 </td></tr>

  <tr>

 		<td>后置条件</td>

      <td>查找到目标客户</td>

  </tr>
<tr>

  	<td rowspan="3">Customer.updateCustomer</td>

      <td>语法</td>
      <td>public ResultMessage updateCustomer(String kind,String level,String name,String phoneNumber,String address,String postcode,String mail,UserVO salesman);</td></tr>

  <tr>

  	<td>前置条件</td>

      <td>需要修改的属性符合输入条件 </td></tr>

  <tr>

 		<td>后置条件</td>

      <td>修改客户属性，持久化更新涉及的对象的数据</td>

  </tr>

  <tr>

  	<th colspan="3" align="center">需要的服务（需接口）</th>

  </tr>

  <tr>

  <th>服务名</th>

  <th colspan="2">服务</th>

  </tr>

  <tr>

  <td>CustomerDataService.add(CustomerPO po)</td>

  <td colspan="2">添加单一持久化对象</td>

  </tr>
  <tr>

  <td>CustomerDataService.delete(CustomerPO po)</td>

  <td colspan="2">删除单一持久化对象</td>

  </tr>
  <tr>

  <td>CustomerDataService.find(long customerID)</td>

  <td colspan="2">根据客户ID查找单一持久化对象</td>

  </tr>
  <tr>

  <td>CustomerDataService.find(String keywords)</td>

  <td colspan="2">根据关键字查找单一持久化对象</td>

  </tr>
  <tr>

  <td>CustomerDataService.update(CustomerPO po)</td>

  <td colspan="2">修改单一持久化对象</td>

  </tr>
  <tr>

  <td>CustomerDataService.getCustomerData</td>

  <td colspan="2">得到Customer的数据引用 </td>

  </tr>

</table>

* 表5.3.2-3 salesbl模块的接口规范

<table>

<tr>

    <th colspan="3" align="center">提供的服务（供接口）</th>

</tr>

<tr>

  	<td rowspan="3">Sales.getPurchaseID</td>

      <td>语法</td>
      <td>public String getPurchaseID();</td></tr>

  <tr>

  	<td>前置条件</td>

      <td>开始创建一个进货单</td></tr>

  <tr>

 		<td>后置条件</td>

      <td>得到该进货单的单据编号</td>

  </tr>

<tr>

  	<td rowspan="3">Sales.getReturnID</td>

      <td>语法</td>
      <td>public String getReturnID()</td></tr>

  <tr>

  	<td>前置条件</td>

      <td>开始创建一个进货退货单</td></tr>

  <tr>

 		<td>后置条件</td>

      <td>得到该进货退货单的单据编号</td>

  </tr>
<tr>

  	<td rowspan="3">Sales.getSalesID</td>

      <td>语法</td>
      <td>public String getSalesID()</td></tr>

  <tr>

  	<td>前置条件</td>

      <td>开始创建一个销售单 </td></tr>

  <tr>

 		<td>后置条件</td>

      <td>得到该销售单的单据编号</td>

</tr>
<tr>

  	<td rowspan="3">Sales.getSalesReturnID</td>

      <td>语法</td>
      <td>public String getSalesReturnID()</td></tr>

  <tr>

  	<td>前置条件</td>

      <td>开始创建一个销售退货单</td></tr>

  <tr>

 		<td>后置条件</td>

      <td>得到该销售退货单的单据编号</td>

  </tr>
   <tr>

  	<td rowspan="3">Sales.showBargains</td>

      <td>语法</td>
      <td>public ArrayList &lt;PromotionBargainVO&gt; showBargains()</td></tr>

  <tr>

  	<td>前置条件</td>

      <td>创建一个Sales对象</td></tr>
<tr>

 		<td>后置条件</td>

      <td>调用Sales方法</td>

  </tr>
  <tr>
 <tr>

  	<td rowspan="3">Sales.findFitPromotionCustomer</td>

      <td>语法</td>
      <td>public ArrayList &lt;PromotionCustomerVO&gt; findFitPromotionCustomer()</td></tr>

  <tr>

  	<td>前置条件</td>

      <td>创建一个Sales对象</td></tr>

  <tr>

 		<td>后置条件</td>

      <td>调用Sales方法</td>

  </tr>
    <tr>
 <tr>

  	<td rowspan="3">Sales.findFitPromotionTotal</td>

      <td>语法</td>
      <td>public ArrayList &lt;PromotionTotalVO&gt; findFitPromotionTotal()</td></tr>

  <tr>

  	<td>前置条件</td>

      <td>创建一个Sales对象</td></tr>

  <tr>

 		<td>后置条件</td>

      <td>调用Sales方法</td>

  </tr>
   
   
   <tr>

  	<td rowspan="3">Sales.addPurchaseItem</td>

      <td>语法</td>
      <td>public purchaseVO addPurchase(PurchasePO)</td></tr>

  <tr>

  	<td>前置条件</td>

      <td>添加数据到进货单中,输入的供应商、仓库、备注、总额合计符合输入规则</td></tr>

  <tr>

 		<td>后置条件</td>

      <td>生成进货单po</td>

  </tr>
  
  <tr>

  	<td rowspan="3">Sales.addGoods</td>

      <td>语法</td>
      <td>public void addGoods(GoodsVO item)</td></tr>

  <tr>

  	<td>前置条件</td>

      <td>输入的商品名称、数量、单价、备注符合输入条件</td></tr>

  <tr>

 		<td>后置条件</td>

      <td>添加商品到商品清单</td>

  </tr>
   
   <tr>

  	<td rowspan="3">Sales.addSalesItem</td>

      <td>语法</td>
      <td>public SalesVO addSalesItem(SalesPO)</td></tr>

  <tr>

  	<td>前置条件</td>

      <td>输入的客户、业务员、操作员、仓库、折让前金额、折让、使用代金券金额、折让后总额、备注符合输入条件</td></tr>

  <tr>

 		<td>后置条件</td>

      <td>生成进货单PO</td>

  </tr>
  
   <tr>
 <tr>

  	<td rowspan="3">Sales.submitPurchase</td>

      <td>语法</td>
      <td>public SalesVO submitPurchase(PurchaseVO pur)</td></tr>

  <tr>

  	<td>前置条件</td>

      <td>单据已经被制定出来</td></tr>

  <tr>

 		<td>后置条件</td>

      <td>单据提交给总经理进行审批，单据状态变为提交状态</td>

  </tr>
    <tr>

  	<td rowspan="3">Sales.submitSales</td>

      <td>语法</td>
      <td>public SalesVO submitSales(SalesVO sal)</td></tr>

  <tr>

  	<td>前置条件</td>

      <td>单据已经被制定出来</td></tr>

  <tr>

 		<td>后置条件</td>

      <td>单据提交给总经理进行审批，单据状态变为提交状态</td>

  </tr>
   
    <tr>
 <tr>

  	<td rowspan="3">Sales.save</td>

      <td>语法</td>
      <td>public salesVO save(SalesVO bill)</td></tr>

  <tr>

  	<td>前置条件</td>

      <td>单据处在正在制定的状态或单据已经被制定出来</td></tr>

  <tr>

 		<td>后置条件</td>

      <td>单据保存到草稿中</td>

</tr>
   
   
<tr>

  	<th colspan="3" align="center">需要的服务（需接口）</th>

  </tr>

  <tr>

  <th>服务名</th>

  <th colspan="2">服务</th>

  </tr>

  <tr>

  <td>SalesDataService.find(String ID)</td>

  <td colspan="2">根据ID查找单一持久化对象</td>

  </tr>
  <tr>

  <td>SalesDataService.add(SalesPO po)</td>

  <td colspan="2">插入单一持久化对象</td>

  </tr>
  <tr>

  <td>SalesDataService.update(SalesPO po)</td>

  <td colspan="2">修改单一持久化对象</td>

  </tr>
  <tr>

  <td>SalesDataService.delete(SalesPO po)</td>

  <td colspan="2">删除单一持久化对象</td>

  </tr>
  <tr>

  <td>SalesDataService.init</td>

  <td colspan="2">清空单一化持久对象</td>

  </tr>
  <tr>

  <td>SalesDataService.show</td>

  <td colspan="2">展示单一化持久对象</td>

  </tr>
  

</table>


* 表5.3.2-4 accountbl模块的接口规范
<table>
	<tr>
		<th colspan="3" align="center">提供的服务（供接口）</th>
	</tr>
	<tr>
    	<td rowspan="3">Account.addAccount</td>
        <td>语法</td>
        <td>public ResultMessage addAccount(string name,double money);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>name和money符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统添加新的银行账户，持久化更新涉及的领域对象的数据</td>
    </tr>
    <tr>
    	<td rowspan="3">Account.findAccount</td>
        <td>语法</td>
        <td>public ArrayList&lt;AccountVO&gt; findAccount(string keyword);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>keyword符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回查找到的银行账户</td>
    </tr>
    <tr>
    	<td rowspan="3">Account.deleteAccount</td>
        <td>语法</td>
        <td>public ResultMessage deleteAccount(String name);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>name符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统删除指定的银行账户，持久化更新涉及的领域对象的数据</td>
    </tr>
        <tr>
    	<td rowspan="3">Account.updateAccount</td>
        <td>语法</td>
        <td>public ResultMessage updateAccount(String name，double money);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>财务人员需要更新银行账户信息</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统更新指定的银行账户，并返回结果</td>
    </tr>
    
    <tr>
    	<th colspan="3" align="center">需要的服务（需接口）</th>
    </tr>
    <tr>
    <th>服务名</th>
    <th colspan="2">服务</th>
    </tr>
    <tr>
    <td>AccountDataService.find(String id)</td>
    <td colspan="2">根据id进行查找单一持久化对象</td>
    </tr>
     <tr>
    <td>AccountDataService.find(String name)</td>
    <td colspan="2">根据名称进行查找单一持久化对象</td>
    </tr>
    <tr>
    <td>AccountDataService.add(AccountPO po)</td>
    <td colspan="2">添加单一持久化对象</td>
    </tr>
    <tr>
    <td>AccountDataService.update(AccountPO po)</td>
    <td colspan="2">更新单一持久化对象</td>
    </tr>
    <tr>
    <td>AccountDataService.delete(AccountPO po)</td>
    <td colspan="2">删除单一持久化对象</td>
    </tr>
    <tr>
    <td>AccountDataService.getAll()</td>
    <td colspan="2">返回所有单一持久化对象</td>
    </tr>
</table>

* 表5.3.2-5 financebl模块的接口规范
<table>
	<tr>
		<th colspan="3" align="center">提供的服务（供接口）</th>
	</tr>
	<tr>
    	<td rowspan="3">Finance.getReceiptID</td>
        <td>语法</td>
        <td>public String getReceiptID();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>请求新建收款单</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回新建收款单的ID</td>
    </tr>
    	<tr>
    	<td rowspan="3">Finance.getPaymentID</td>
        <td>语法</td>
        <td>public String getPaymentID();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>请求新建付款单</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回新建付款单的ID</td>
    </tr>
    <tr>
    	<td rowspan="3">Finance.getCashBillID</td>
        <td>语法</td>
        <td>public String getCashBillID();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>请求新建现金费用单</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回新建现金费用单的ID</td>
    </tr>
    <tr>
    	<td rowspan="3">Finance.getUserID</td>
        <td>语法</td>
        <td>public String getUserID();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>请求新建收、付款/现金费用单据</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回当前用户ID</td>
    </tr>
    <tr>
    	<td rowspan="3">Finance.addAccountBillItem</td>
        <td>语法</td>
        <td>public ResultMessage addAccountBillItem(AccountBillItemVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统添加转账列表，持久化更新涉及的领域对象的数据</td>
    </tr>
     <tr>
    	<td rowspan="3">Finance.addCashBillItem</td>
        <td>语法</td>
        <td>public ResultMessage addCashBillItem(CashBillItemVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统添加条目清单，持久化更新涉及的领域对象的数据</td>
    </tr>
        <tr>
    	<td rowspan="3">Finance.addAccountBill</td>
        <td>语法</td>
        <td>public ResultMessage addAccountBill(AccountBillVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>单据信息输入符合规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统建立新的收付款单据，并返回结果</td>
    </tr>
        <tr>
    	<td rowspan="3">Finance.addCashBill</td>
        <td>语法</td>
        <td>public ResultMessage addCashBill(CashBillVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>单据信息输入符合规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统建立新的现金费用单据，并返回结果</td>
    </tr>
    <tr>
    	<td rowspan="3">Finance.getAllClients</td>
        <td>语法</td>
        <td>public ArrayList&lt;CustomerVO&gt; getAllCustomers();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>需要显示所有的客户</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回所有的客户列表</td>
    </tr>
    <tr>
    	<td rowspan="3">Finance.getAllAccounts</td>
        <td>语法</td>
        <td>public ArrayList&lt;AccountVO&gt; getAllAccounts();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>需要显示所有的银行账户</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回所有的银行账户列表</td>
    </tr>
    <tr>
    	<td rowspan="3">Finance.save</td>
        <td>语法</td>
        <td>public ResultMessage save(BillVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>填写部分信息但不提交，需要保存草稿</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统保存草稿单据，返回结果</td>
    </tr>
     <tr>
    	<td rowspan="3">Finance.submit</td>
        <td>语法</td>
        <td>public ResultMessage submit(BillVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>填写完整单据信息</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统提交单据</td>
    </tr>
     <tr>
    	<td rowspan="3">Finance.find</td>
        <td>语法</td>
        <td>public AccountBillVO find(String id);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>id符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回指定的单据</td>
    </tr>
     <tr>
    	<td rowspan="3">Finance.getSaleDetails</td>
        <td>语法</td>
        <td>public SaleDetailVO getSaleDetails(Date startDate，Date endDate，String goodName, String customerName, String salesmanName, String inventoryName);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回符合条件的销售明细表</td>
    </tr>
     <tr>
    	<td rowspan="3">Finance.getSalesDetails</td>
        <td>语法</td>
        <td>public ArrayList&lt;SalesDetailVO&gt; getSalesDetails(Date startDate，Date endDate，String goodName, String customerName, String salesmanName, String inventoryName);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回符合条件的销售明细表</td>
    </tr>
     <tr>
    	<td rowspan="3">Finance.getDocumentDetails</td>
        <td>语法</td>
        <td>public DocumentDetailsVO getDocumentDetails(Date startDate，Date endDate，String billType, String customerName, String salesmanName, String inventoryName);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回符合条件的经营历程表</td>
    </tr>
     <tr>
    	<td rowspan="3">Finance.getDocumentDetails</td>
        <td>语法</td>
        <td>public DocumentDetailsVO getDocumentDetails(Date startDate，Date endDate，String billType, String customerName, String salesmanName, String inventoryName);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回符合条件的经营历程表</td>
    </tr>
     <tr>
    	<td rowspan="3">Finance.getProfit</td>
        <td>语法</td>
        <td>public ProfitVO getProfit(Date startDate，Date endDate);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>startDate和endDate符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回时间区间内的经营情况表</td>
    </tr>
     <tr>
    	<td rowspan="3">Finance.redCover</td>
        <td>语法</td>
        <td>public ResultMessage redCover(BillVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>选中某张单据请求红冲</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统将指定单据红冲</td>
    </tr>
     <tr>
    	<td rowspan="3">Finance.redCopy</td>
        <td>语法</td>
        <td>public ResultMessage redCopy(BillVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>选中某张单据请求红冲并复制</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统将指定单据红冲并复制</td>
    </tr>
    <tr>
    	<th colspan="3" align="center">需要的服务（需接口）</th>
    </tr>
    <tr>
    <th>服务名</th>
    <th colspan="2">服务</th>
    </tr>
    <tr>
    <td>FinanceDataService.find(String id)</td>
    <td colspan="2">根据id进行查找单一持久化对象</td>
    </tr>
    <tr>
    <td>FinanceDataService.addAccountBill(PO po)</td>
    <td colspan="2">添加单一持久化对象</td>
    </tr>
    <tr>
    <td>FinanceDataService.update(PO po)</td>
    <td colspan="2">更新单一持久化对象</td>
    </tr>
     <tr>
    <td>FinanceDataService.delete(PO po)</td>
    <td colspan="2">删除指定的单一持久化对象</td>
    </tr>
     <tr>
    <td>FinanceDataService.getAll()</td>
    <td colspan="2">返回所有单一持久化对象</td>
    </tr>
     <tr>
    <td>FinanceDataService.getReceiptID()</td>
    <td colspan="2">返回新建的收款单ID</td>
    </tr>
    <tr>
    <td>FinanceDataService.getPaymentID()</td>
    <td colspan="2">返回新建的付款单ID</td>
    </tr>
     <tr>
    <td>FinanceDataService.getCashBillID()</td>
    <td colspan="2">返回新建的现金费用单ID</td>
    </tr>
      <tr>
    <td>FinanceDataService.getUserID()</td>
    <td colspan="2">返回当前用户ID</td>
    </tr>
</table>
  
* 表5.3.2-4 initializationbl模块的接口规范
<table>
	<tr>
		<th colspan="3" align="center">提供的服务（供接口）</th>
	</tr>
<tr>
    	<td rowspan="3">Initialization.add</td>
    	<td>语法</td>
    	<td>public ResultMessage add(ArrayList&lt;initAccountVO&gt; vo);</td></tr>
<tr>
    	<td>前置条件</td>
    	<td>商品信息、客户信息、银行账户输入合法</td></tr>
<tr>
   		<td>后置条件</td>
    	<td>建立期初账目</td>
</tr>
<tr>
    	<td rowspan="3">Initialization.getAverage</td>
        <td>语法</td>
        <td>public double getAverage(int time， double purPrice， double salePrice);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>商品信息存在</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>返回去年的平均进价和售价</td>
    </tr>
    
    <tr>
    	<th colspan="3" align="center">需要的服务（需接口）</th>
    </tr>
    <tr>
    <th>服务名</th>
    <th colspan="2">服务</th>
    </tr>
    <tr>
    <td>InitializationDataService.init()</td>
    <td colspan="2">初始化持久数据</td>
    </tr>
    <tr>
    <td>InitializationDataService.add(ExaminationPO po)</td>
    <td colspan="2">插入单一持久化对象</td>
    </tr>
</table>

* 表5.3.2-4 examinationbl模块的接口规范
<table>
	<tr>
		<th colspan="3" align="center">提供的服务（供接口）</th>
	</tr>
<tr>
    	<td rowspan="3">Examination.show</td>
    	<td>语法</td>
    	<td>public ArrayList&lt;ExaminationVO&gt; show();</td></tr>
<tr>
    	<td>前置条件</td>
    	<td>存在待审核单据</td></tr>
<tr>
   		<td>后置条件</td>
    	<td>显示所有待审批单据</td>
</tr>
<tr>
    	<td rowspan="3">Examination.checkReceipt</td>
        <td>语法</td>
        <td>public ResultMessage checkReceipt(PO receipt);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>存在待审核单据</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>查看单据内容</td>
    </tr>
    <tr>
    	<td rowspan="3">Examination.modifyReceipt</td>
        <td>语法</td>
        <td>public ResultMessage modifyReceipt(PO receipt);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>已查看单据内容</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>修改单据内容</td>
    </tr>
     <tr>
    	<td rowspan="3">Examination.approveReceipt</td>
        <td>语法</td>
        <td>public ResultMessage approveReceipt(PO receipt);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>已查看单据内容并确认无错误</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>修改单据状态，记录审批时间并更新数据</td>
    </tr>
    
    <tr>
    	<th colspan="3" align="center">需要的服务（需接口）</th>
    </tr>
    <tr>
    <th>服务名</th>
    <th colspan="2">服务</th>
    </tr>
    <tr>
    <td>ExaminationDataService.finds(Date startDate, Date endDate)</td>
    <td colspan="2">根据审批时间进行查找多个持久化对象</td>
    </tr>
    <tr>
    <td>ExaminationDataService.add(ExaminationPO po)</td>
    <td colspan="2">插入单一持久化对象</td>
    </tr>
</table>

* 表5.3.2-4 promotionCustomer模块的接口规范
<table>
	<tr>
		<th colspan="3" align="center">提供的服务（供接口）</th>
	</tr>
	<tr>
    	<td rowspan="3">PromotionCustomer.show</td>
        <td>语法</td>
        <td>public ArrayList&lt;PromotionCustomerVO&gt; show();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>得到会员促销策略数据</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>返回所有会员促销策略</td>
    </tr>
    <tr>
    	<td rowspan="3">PromotionCustomer.addGift</td>
        <td>语法</td>
        <td>public void addGift(GoodsVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>添加商品到促销策略中</td>
    </tr>
     <tr>
    	<td rowspan="3">PromotionCustomer.addVoucher</td>
        <td>语法</td>
        <td>public void addVoucher(double price);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>添加代金券到促销策略中</td>
    </tr>
         <tr>
    	<td rowspan="3">PromotionCustomer.addAllowance</td>
        <td>语法</td>
        <td>public void addAllowance(double price);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>添加价格折让到促销策略中</td>
    </tr>
         <tr>
    	<td rowspan="3">PromotionCustomer.setStartDate</td>
        <td>语法</td>
        <td>public void setStartDate(Date date);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>设置促销策略开始时间</td>
    </tr>
  <tr>
    	<td rowspan="3">PromotionCustomer.setEndDate</td>
        <td>语法</td>
        <td>public void setEndDate(Date date);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>设置促销策略结束时间</td>
    </tr>
        <tr>
    	<td rowspan="3">PromotionCustomer.submit</td>
        <td>语法</td>
        <td>public ResultMessage submit(PromotionCustomerVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>促销策略客户等级、赠品、代金券、折让、生效期间设置完成</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>提交促销策略</td>
    </tr>
         <tr>
    	<td rowspan="3">PromotionCustomer.bulidPromotion</td>
        <td>语法</td>
        <td>public PromotionPO buildPromotion();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>促销策略成功提交</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>建立促销策略数据</td>
    </tr>
    
    <tr>
    	<th colspan="3" align="center">需要的服务（需接口）</th>
    </tr>
    <tr>
    <th>服务名</th>
    <th colspan="2">服务</th>
    </tr>
    <tr>
    <td>PromotionDataService.find(String ID)</td>
    <td colspan="2">根据策略ID进行查找单一持久化对象</td>
    </tr>
    <tr>
    <td>PromotionDataService.add(PromotionCustomerPO po)</td>
    <td colspan="2">插入单一持久化对象</td>
    </tr>
    <tr>
    <td>PromotionDataService.delete(PromotionCustomerPO po)</td>
    <td colspan="2">删除单一持久化对象</td>
    </tr>
    <tr>
    <td>PromotionDataService.update(PromotionCustomerPO po)</td>
    <td colspan="2">更新单一持久化对象</td>
    </tr>
</table>

* 表5.3.2-4 promotionBargain模块的接口规范
<table>
	<tr>
		<th colspan="3" align="center">提供的服务（供接口）</th>
	</tr>
	<tr>
    	<td rowspan="3">PromotionBargain.show</td>
        <td>语法</td>
        <td>public ArrayList&lt;PromotionBargainVO&gt; show();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>得到特价包策略数据</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>返回所有特价包策略</td>
    </tr>
    <tr>
    	<td rowspan="3">PromotionBargain.addBargain</td>
        <td>语法</td>
        <td>public void addBargain(GoodsVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>添加商品到特价包中</td>
    </tr>
     <tr>
    	<td rowspan="3">PromotionBargain.setPrice</td>
        <td>语法</td>
        <td>public void setPrice(double price);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>特价包中商品已添加，且输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>设置特价包价格</td>
    </tr>
             <tr>
    	<td rowspan="3">PromotionBargain.setStartDate</td>
        <td>语法</td>
        <td>public void setStartDate(Date date);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>设置促销策略开始时间</td>
    </tr>
  <tr>
    	<td rowspan="3">PromotionBaigain.setEndDate</td>
        <td>语法</td>
        <td>public void setEndDate(Date date);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>设置促销策略结束时间</td>
    </tr>
        <tr>
    	<td rowspan="3">PromotionBargain.submit</td>
        <td>语法</td>
        <td>public ResultMessage submit(PromotionBargainVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>促销策略特价包商品、价格、生效期间设置完成</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>提交促销策略</td>
    </tr>
         <tr>
    	<td rowspan="3">PromotionBargain.bulidPromotion</td>
        <td>语法</td>
        <td>public PromotionPO buildPromotion();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>促销策略成功提交</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>建立促销策略数据</td>
    </tr>
    
    <tr>
    	<th colspan="3" align="center">需要的服务（需接口）</th>
    </tr>
    <tr>
    <th>服务名</th>
    <th colspan="2">服务</th>
    </tr>
    <tr>
    <td>PromotionDataService.find(String ID)</td>
    <td colspan="2">根据策略ID进行查找单一持久化对象</td>
    </tr>
    <tr>
    <td>PromotionDataService.add(PromotionBargainPO po)</td>
    <td colspan="2">插入单一持久化对象</td>
    </tr>
    <tr>
    <td>PromotionDataService.delete(PromotionBargainPO po)</td>
    <td colspan="2">删除单一持久化对象</td>
    </tr>
    <tr>
    <td>PromotionDataService.update(PromotionBargainPO po)</td>
    <td colspan="2">更新单一持久化对象</td>
    </tr> 
</table>

* 表5.3.2-4 promotionTotal模块的接口规范
<table>
	<tr>
		<th colspan="3" align="center">提供的服务（供接口）</th>
	</tr>
	<tr>
    	<td rowspan="3">PromotionTotal.show</td>
        <td>语法</td>
        <td>public ArrayList&lt;PromotionTotal&gt; show();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>得到总价促销策略数据</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>返回所有总价促销策略</td>
    </tr>
    <tr>
    	<td rowspan="3">PromotionTotal.addGift</td>
        <td>语法</td>
        <td>public void addGift(GoodsVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>添加赠品到促销策略中</td>
    </tr>
     <tr>
    	<td rowspan="3">PromotionTotal.addVoucher</td>
        <td>语法</td>
        <td>public void addVoucher(double price);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>添加代金券到促销策略中</td>
    </tr>
         <tr>
    	<td rowspan="3">PromotionTotal.setPrice</td>
        <td>语法</td>
        <td>public void setPrice(double price);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>设置出发促销策略的目标总价</td>
    </tr>
         <tr>
    	<td rowspan="3">PromotionTotal.setStartDate</td>
        <td>语法</td>
        <td>public void setStartDate(Date date);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>设置促销策略开始时间</td>
    </tr>
  <tr>
    	<td rowspan="3">PromotionTotal.setEndDate</td>
        <td>语法</td>
        <td>public void setEndDate(Date date);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>设置促销策略结束时间</td>
    </tr>
        <tr>
    	<td rowspan="3">PromotionTotal.submit</td>
        <td>语法</td>
        <td>public ResultMessage submit(PromotionCustomerVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>促销策略赠品、代金券、目标总价、生效期间设置完成</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>提交促销策略</td>
    </tr>
         <tr>
    	<td rowspan="3">PromotionTotal.bulidPromotion</td>
        <td>语法</td>
        <td>public PromotionPO buildPromotion();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>促销策略成功提交</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>建立促销策略数据</td>
    </tr>
    
    <tr>
    	<th colspan="3" align="center">需要的服务（需接口）</th>
    </tr>
    <tr>
    <th>服务名</th>
    <th colspan="2">服务</th>
    </tr>
    <tr>
    <td>PromotionDataService.find(String ID)</td>
    <td colspan="2">根据策略ID进行查找单一持久化对象</td>
    </tr>
    <tr>
    <td>PromotionDataService.add(PromotionTotalPO po)</td>
    <td colspan="2">插入单一持久化对象</td>
    </tr>
    <tr>
    <td>PromotionDataService.delete(PromotionTotalPO po)</td>
    <td colspan="2">删除单一持久化对象</td>
    </tr>
    <tr>
    <td>PromotionDataService.update(PromotionTotalPO po)</td>
    <td colspan="2">更新单一持久化对象</td>
    </tr>
</table>

* 表5.3.2-4 userbl模块的接口规范
<table>
	<tr>
		<th colspan="3" align="center">提供的服务（供接口）</th>
	</tr>
	<tr>
    	<td rowspan="3">User.login</td>
        <td>语法</td>
        <td>public ResultMessage login(String userID, String password);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>password符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>查找是否存在相应的User，根据输入的password返回登录验证的结果</td>
    </tr>
    <tr>
    	<td rowspan="3">User.addUser</td>
        <td>语法</td>
        <td>public ResultMessage addUser(String userID, String password, String name, UserPosition position, UserLimits limit);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>添加的用户ID和姓名不重复</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>添加用户</td>
    </tr>
     <tr>
    	<td rowspan="3">User.deleteUser</td>
        <td>语法</td>
        <td>public ResultMessage deleteUser(String userID);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>输入ID合法且该用户存在</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>根据ID查找相应用户并删除</td>
    </tr>
         <tr>
    	<td rowspan="3">User.modifyUser</td>
        <td>语法</td>
        <td>public ResultMessage modifyUser(String userID, String password, String name, UserPosition position, UserLimits limit);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>输入的用户ID，密码，姓名，职位，权限合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>根据用户ID查找相应用户并更改用户信息</td>
    </tr>
    
    <tr>
    	<th colspan="3" align="center">需要的服务（需接口）</th>
    </tr>
    <tr>
    <th>服务名</th>
    <th colspan="2">服务</th>
    </tr>
    <tr>
    <td>DatabaseFactory.getUserDatabase</td>
    <td colspan="2">得到User数据库的服务的引用</td>
    </tr>
    <tr>
    <td>UserDataService.find(UserPO po)</td>
    <td colspan="2">查找单一持久化对象</td>
    </tr>
    <tr>
    <td>UserDataService.add(UserPO po)</td>
    <td colspan="2">插入单一持久化对象</td>
    </tr>
    <tr>
    <td>UserDataService.delete(UserPO po)</td>
    <td colspan="2">删除单一持久化对象</td>
    </tr>
    <tr>
    <td>UserDataService.update(UserPO po)</td>
    <td colspan="2">更新单一持久化对象</td>
    </tr>
</table>


* 表 5.3.2-7 goodsbl模块的接口规范
<table>
  <tr>
  	<th colspan="3" align="center">提供的服务（供接口）</th>
  </tr>
  <tr>
    	<td rowspan="3">Goods.show</td>
        <td>语法</td>
        <td>public ArrayList&lt;GoodsVO&gt; show();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>以库存管理人员身份登录</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>展示所有商品</td>
    </tr>
  <tr>
    	<td rowspan="3">Goods.find</td>
        <td>语法</td>
        <td>public ArrayList&lt;GoodsVO&gt; find(String keyword);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>关键字输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>返回搜索结果</td>
    </tr>
  <tr>
    	<td rowspan="3">Goods.showDetails</td>
        <td>语法</td>
        <td>public GoodsVO showDetails(String id);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>商品ID输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>展示该商品详情</td>
    </tr>
  <tr>
    	<td rowspan="3">Goods.add</td>
        <td>语法</td>
        <td>public ResultMessage add(GoodsVO goods);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>商品信息输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>添加新的商品，持久化更新涉及的对象的数据</td>
    </tr>
  <tr>
    	<td rowspan="3">Goods.delete</td>
        <td>语法</td>
        <td>public ResultMessage delelte(String id);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>商品ID输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>删除商品，持久化更新涉及的对象的数据</td>
    </tr>
  <tr>
    	<td rowspan="3">Goods.update</td>
        <td>语法</td>
        <td>public ResultMessage update(String GoodsVO);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>商品信息输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>修改商品，持久化更新涉及的对象的数据</td>
    </tr>
  <tr>
    	<td rowspan="3">Goods.newID</td>
        <td>语法</td>
        <td>public String newID();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>输入符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>返回新建的ID</td>
    </tr>

    <tr>
    	<th colspan="3" align="center">需要的服务（需接口）</th>
    </tr>
    <tr>
    <th>服务名</th>
    <th colspan="2">服务</th>
    </tr>
    <tr>
    <td>Goods.find(String id)</td>
    <td colspan="2">根据ID查找单一持久化对象</td>
    </tr>
    <tr>
    <td>Goods.add(GoodsPO po)</td>
    <td colspan="2">添加单一持久化对象</td>
    </tr>
    <tr>
    <td>Goods.delete(GoodsPO po)</td>
    <td colspan="2">删除单一持久化对象</td>
    </tr>
    <tr>
    <td>Goods.update(GoodsPO po)</td>
    <td colspan="2">修改单一持久化对象</td>
    </tr>
</table>

* 表 5.3.2-8 classificationbl模块的接口规范
<table>
  <tr>
  	<th colspan="3" align="center">提供的服务（供接口）</th>
  </tr>
  <tr>
    	<td rowspan="3">Classification.show</td>
        <td>语法</td>
        <td>public ArrayList&lt;ClassificationVO&gt; show();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>以库存管理人员身份登录</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>展示所有商品分类</td>
    </tr>
  <tr>
    	<td rowspan="3">Classification.find</td>
        <td>语法</td>
        <td>public ArrayList&lt;ClassificationVO&gt; find(String keyword);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>关键字输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>返回搜索结果</td>
    </tr>
  <tr>
    	<td rowspan="3">Classification.showDetails</td>
        <td>语法</td>
        <td>public ClassificationVO showDetails(String id);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>ID输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>展示该商品分类详情</td>
    </tr>
  <tr>
    	<td rowspan="3">Classification.add</td>
        <td>语法</td>
        <td>public ResultMessage add(ClassificationVO goods);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>商品分类信息输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>添加新的商品分类，持久化更新涉及的对象的数据</td>
    </tr>
  <tr>
    	<td rowspan="3">Classification.delete</td>
        <td>语法</td>
        <td>public ResultMessage delelte(String id);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>商品分类名称输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>删除商品分类，持久化更新涉及的对象的数据</td>
    </tr>
  <tr>
    	<td rowspan="3">Classification.update</td>
        <td>语法</td>
        <td>public ResultMessage update(String ClassificationVO);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>商品分类信息输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>修改商品分类，持久化更新涉及的对象的数据</td>
    </tr>
  <tr>
    	<td rowspan="3">Classification.newID</td>
        <td>语法</td>
        <td>public String newID();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>输入符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>返回新建的ID</td>
    </tr>

    <tr>
    	<th colspan="3" align="center">需要的服务（需接口）</th>
    </tr>
    <tr>
    <th>服务名</th>
    <th colspan="2">服务</th>
    </tr>
    <tr>
    <td>Classification.find(String id)</td>
    <td colspan="2">根据ID查找单一持久化对象</td>
    </tr>
    <tr>
    <td>Classification.add(ClassificationPO po)</td>
    <td colspan="2">添加单一持久化对象</td>
    </tr>
    <tr>
    <td>Classification.delete(ClassificationPO po)</td>
    <td colspan="2">删除单一持久化对象</td>
    </tr>
    <tr>
    <td>Classification.update(ClassificationPO po)</td>
    <td colspan="2">修改单一持久化对象</td>
    </tr>
</table>

## 5.4 数据层的分解
数据层主要给业务逻辑层提供数据访问服务，包括对持久化数据的增、删、改、查。

### 5.4.1 数据层模块的职责
数据层模块的职责如表 5.4.1-1所示。

* 表 5.4.1-1 数据层模块的职责

| 模块                        | 职责                                       |
| ------------------------- | ---------------------------------------- |
| GoodsDataService          | 提供商品的集体载入、保存、增、删、查、改服务                   |
| InventoryDataService      | 提供进货单、进货退货单、库存报溢（损）单的集体载入、保存、增、删、查、改服务，以及库存赠送单、库存报警单的集体载入、保存、查看服务 |
| ClassificationDataService | 提供商品分类的集体载入、保存、增、删、查、改服务                 |
| CustomerDataService       | 提供客户数据的集体载入、保存、增、删、查、改服务                 |
| SalesDataService          | 提供销售出货（退货）单的集体载入、保存、增、删、查、改服务            |
| AccountDataService        | 提供账户数据的集体载入、保存、增、删、查、改服务                 |
| FinanceDataService        | 提供收（付）款单、现金费用单的集体载入、保存、增、删、查、改服务，以及销售明细表、经营历程表、经营情况表的查看服务 |
| InitializationDataService | 提供期初建账数据的集体载入、保存、增加、查看服务                 |
| ExaminationDataService    | 提供单据数据的集体载入、保存、查看、修改服务                   |
| PromotionDataService      | 提供促销策略数据的集体载入、保存、增、删、查、改服务               |
| UserDataService           | 提供用户数据的集体载入、保存、增、删、查、改服务                 |

### 5.4.2 数据层模块的接口规范
* 表5.3.2-1 InventoryDataService模块的接口规范
<table>
	<tr>
		<th colspan="3" align="center">提供的服务（供接口）</th>
	</tr>
<tr>
    	<td rowspan="3">InventoryDataService.findBill</td>
        <td>语法</td>
        <td>public InventoryBillPO findBill(String id) throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>ID输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>返回该ID对应的po对象</td>
    </tr>
<tr>
    	<td rowspan="3">InventoryDataService.addBill</td>
        <td>语法</td>
        <td>public ResultMessage addBill(InventoryDataServicePO po) throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>同样的po在数据中不存在</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>在数据库中增加一个po记录</td>
    </tr>
 	<tr>
    	<td rowspan="3">InventoryDataService.deleteBill</td>
        <td>语法</td>
        <td>public ResultMessage deleteBill(InventoryBillPO po) throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>数据库中有同一ID的po对象</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>删除该ID对应的po对象</td>
    </tr>
 	<tr>
    	<td rowspan="3">InventoryDataService.updateBill</td>
        <td>语法</td>
        <td>public ResultMessage updateBill(InventoryBillPO po) throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>数据库中有同一ID的po对象</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>修改该ID对应的po对象</td>
    </tr>
</table>

* 表5.4.2-2 CustomerDataService

<table>
  <tr>
  	<th colspan="3" align="center">提供的服务（供接口）</th>
  </tr>
  <tr>
    	<td rowspan="3">CustomerDataService.add</td>
        <td>语法</td>
        <td>public ResultMessage add(CustomerPO po)</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>相同的客户PO在储存的数据中不存在</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>添加一条客户PO</td>
    </tr>
    <tr>
    	<td rowspan="3">CustomerDataService.delete</td>
        <td>语法</td>
        <td>public ResultMessage delete(CustomerPO po)</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>需要删除的客户在储存的数据中已经存在</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>删除一条客户PO</td>
    </tr>
<tr>
    	<td rowspan="3">CustomerDataService.find</td>
        <td>语法</td>
        <td>public CustomerVO find(long customerID)</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>需要查找的客户PO在储存的数据中已经存在</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>返回响应的结果</td>
    </tr>
    <tr>
    	<td rowspan="3">CustomerDataService.find</td>
        <td>语法</td>
        <td>public CustomerVO find(String keywords)</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>需要查找的客户PO在储存的数据中已经存在</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>返回响应的结果</td>
    </tr>
<tr>
    	<td rowspan="3">CustomerDataService.update</td>
        <td>语法</td>
        <td>public ResultMessage update(CustomerPO po)</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>相同的客户PO在储存的数据中已经存在</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>修改一条客户PO</td>
    </tr>
  <tr>
    	<td rowspan="3">CustomerDataService.getCustomerData</td>
        <td>语法</td>
        <td>public CustomerPO getCustomerData()</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>需要得到的客户PO在储存的数据中已经存在</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>得到一条客户PO</td>
    </tr>
</table>

* 表5.4.2-3 SalesDataService

<table>
  <tr>
  	<th colspan="3" align="center">提供的服务（供接口）</th>
  </tr>
  <tr>
    	<td rowspan="3">SalesDataService.find</td>
        <td>语法</td>
        <td>public SalesVO find(String ID)</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>同样ID的po在储存的数据中不存在</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>按ID进行查找返回响应的SalesPO结果</td>
    </tr>
    <tr>
    	<td rowspan="3">SalesDataService.add</td>
        <td>语法</td>
        <td>public ResultMessage add(salesPO po)</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>同样ID的po在储存的数据中不存在</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>在数据库中增加一个po记录</td>
    </tr>
<tr>
    	<td rowspan="3">SalesDataService.update</td>
        <td>语法</td>
        <td>public ResultMessage update(salesPO po)</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>在数据中存在同样ID的po</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>更新一个po</td>
    </tr>
    <tr>
    <td rowspan="3">SalesDataService.delete</td>
        <td>语法</td>
        <td>public ResultMessage delete(salesPO po)</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>在数据库中存在同样ID的po</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>删除一个po</td>
    </tr>
<tr>
    	<td rowspan="3">SalesDataService.init</td>
        <td>语法</td>
        <td>public void init()</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>无</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>初始化持久化数据库</td>
    </tr>
  <tr>
    	<td rowspan="3">SalesDataService.show</td>
        <td>语法</td>
        <td>public ArrayList &lt;SalesVO&gt; show()</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>无</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>返回所有进货单和销售单</td>
    </tr>
  </table>


* 表5.3.2-4 InitializationDataService模块的接口规范
<table>
	<tr>
		<th colspan="3" align="center">提供的服务（供接口）</th>
	</tr>
<tr>
    	<td rowspan="3">InitializationDataService.add</td>
        <td>语法</td>
        <td>public ResultMessage add(InitAccountPO po) throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>同样的po在数据中不存在</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>在数据库中增加一个po记录</td>
    </tr>
 	<tr>
    	<td rowspan="3">InitializationDataService.init</td>
        <td>语法</td>
        <td>public void init() throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>无</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>初始化持久化数据库</td>
    </tr>
</table>

* 表5.3.2-4 ExaminationDataService模块的接口规范
<table>
	<tr>
		<th colspan="3" align="center">提供的服务（供接口）</th>
	</tr>
<tr>
    	<td rowspan="3">ExaminationDataService.finds</td>
    	<td>语法</td>
    	<td>public ArrayList&lt;ExaminationVO&gt; finds(Date startDate, Date endDate) throws RemoteException;</td></tr>
<tr>
    	<td>前置条件</td>
    	<td>无</td></tr>
<tr>
   		<td>后置条件</td>
    	<td>按审批时间段查找返回相应的ExaminationVO结果</td>
</tr>
<tr>
    	<td rowspan="3">ExaminationDataService.add</td>
        <td>语法</td>
        <td>public ResultMessage add(ExaminationPO po) throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>同样的po在数据中不存在</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>在数据库中增加一个po记录</td>
    </tr>
 	<tr>
    	<td rowspan="3">ExaminationDataService.init</td>
        <td>语法</td>
        <td>public void init() throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>无</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>初始化持久化数据库</td>
    </tr>
</table>

* 表5.3.2-4 PromotionDataService模块的接口规范
<table>
	<tr>
		<th colspan="3" align="center">提供的服务（供接口）</th>
	</tr>
<tr>
    	<td rowspan="3">PromotionDataService.getID</td>
    	<td>语法</td>
    	<td>public String PromotionDataService.getID() throws RemoteException;</td></tr>
<tr>
    	<td>前置条件</td>
    	<td>无</td></tr>
<tr>
   		<td>后置条件</td>
    	<td>返回促销策略ID</td>
</tr>
<tr>
    	<td rowspan="3">PromotionDataService.find</td>
        <td>语法</td>
        <td>public PromotionPO PromotionDataService.find(String ID) throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>无</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>按促销策略ID进行查找返回相应的PromotionPO结果</td>
    </tr>
    <tr>
    	<td rowspan="3">PromotionDataService.add</td>
        <td>语法</td>
        <td>public ResultMessage add(PromotionPO po) throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>同样的po在数据中不存在</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>在数据库中增加一个po记录</td>
    </tr>
    <tr>
    	<td rowspan="3">PromotionDataService.delete</td>
        <td>语法</td>
        <td>public ResultMessage delete(PromotionPO po) throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>在数据库中存在相同的po</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>删除一个po</td>
    </tr>
    <tr>
    	<td rowspan="3">PromotionDataService.update</td>
        <td>语法</td>
        <td>public ResultMessage update(PromotionPO po) throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>在数据库中存在相同的po</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>更新一个po</td>
    </tr>
    <tr>
    	<td rowspan="3">PromotionDataService.init</td>
        <td>语法</td>
        <td>public void init() throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>无</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>初始化持久化数据库</td>
    </tr>
</table>

* 表5.3.2-4 UserDataService模块的接口规范
<table>
	<tr>
		<th colspan="3" align="center">提供的服务（供接口）</th>
	</tr>
<tr>
    	<td rowspan="3">UserDataService.find</td>
        <td>语法</td>
        <td>public UserPO UserDataService.find(String userID) throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>无</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>按用户ID进行查找返回相应的UserPO结果</td>
    </tr>
    <tr>
    	<td rowspan="3">UserDataService.add</td>
        <td>语法</td>
        <td>public ResultMessage add(UserPO po) throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>同样的po在数据中不存在</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>在数据库中增加一个po记录</td>
    </tr>
    <tr>
    	<td rowspan="3">UserDataService.delete</td>
        <td>语法</td>
        <td>public ResultMessage delete(UserPO po) throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>在数据库中存在相同的po</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>删除一个po</td>
    </tr>
    <tr>
    	<td rowspan="3">UserDataService.update</td>
        <td>语法</td>
        <td>public ResultMessage update(UserPO po) throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>在数据库中存在相同的po</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>更新一个po</td>
    </tr>
    <tr>
    	<td rowspan="3">UserDataService.init</td>
        <td>语法</td>
        <td>public void init() throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>无</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>初始化持久化数据库</td>
    </tr>
</table>
* 表5.3.2-7 GoodsDataService模块的接口规范
<table>
	<tr>
		<th colspan="3" align="center">提供的服务（供接口）</th>
	</tr>
	<tr>
    	<td rowspan="3">GoodsDataService.find</td>
        <td>语法</td>
        <td>public GoodsPO find(String id) throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>ID输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>返回该ID对应的po对象</td>
    </tr>
<tr>
    	<td rowspan="3">GoodsDataService.add</td>
        <td>语法</td>
        <td>public ResultMessage add(GoodsDataServicePO po) throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>同样的po对象在数据中不存在</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>在数据库中增加一个po记录</td>
    </tr>
 	<tr>
    	<td rowspan="3">GoodsDataService.delete</td>
        <td>语法</td>
        <td>public ResultMessage delete(GoodsDataServicePO po) throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>数据库中有同一ID的po对象</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>删除该ID对应的po对象</td>
    </tr>
 	<tr>
    	<td rowspan="3">GoodsDataService.update</td>
        <td>语法</td>
        <td>public ResultMessage update(GoodsDataServicePO po) throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>数据库中有同一ID的po对象</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>修改该ID对应的po对象</td>
    </tr>
</table>
* 表5.3.2-10 ClassificationDataService模块的接口规范
<table>
	<tr>
		<th colspan="3" align="center">提供的服务（供接口）</th>
	</tr>
	<tr>
    	<td rowspan="3">ClassificationDataService.find</td>
        <td>语法</td>
        <td>public ClassificationDataServicePO find(String id) throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>ID输入合法</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>返回该ID对应的po对象</td>
    </tr>
<tr>
    	<td rowspan="3">ClassificationDataService.add</td>
        <td>语法</td>
        <td>public ResultMessage add(ClassificationDataServicePO po) throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>同样的po对象在数据中不存在</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>在数据库中增加一个po记录</td>
    </tr>
 	<tr>
    	<td rowspan="3">ClassificationDataService.delete</td>
        <td>语法</td>
        <td>public ResultMessage deleteBill(ClassificationDataServicePO po) throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>数据库中有同一ID的po对象</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>删除该ID对应的po对象</td>
    </tr>
 	<tr>
    	<td rowspan="3">ClassificationDataService.update</td>
        <td>语法</td>
        <td>public ResultMessage updateBill(ClassificationDataServicePO po) throws RemoteException;</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>数据库中有同一ID的po对象</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>修改该ID对应的po对象</td>
    </tr>
</table>

# 6. 信息视角

## 6.1 数据持久化对象

系统的PO类就是对应的相关的实体类，如表 6.1-1所示

* 表 6.1-1 数据持久化对象


|           类名            |                  包含的属性                   |
| :---------------------: | :--------------------------------------: |
|         **PO**          |         **PO类的父类，存在PO会使用的共同方法**         |
|  **classificationPO**   |        **编号、名称、父分类、子分类、包含商品的ID**         |
|       **goodsPO**       | **编号、名称、型号、数量、进价、零售价、最近进价、最近零售价、所属分类、警戒数量、所属仓库** |
|   **inventoryBillPO**   | **编号、单据类型、单据状态、时间、商品名称、商品型号、商品所属仓库、商品溢出/缺损数量** |
|     **customerPO**      | **编号、分类、级别、姓名、电话、地址、邮编、电子邮箱、应收额度、应收、应付、默认业务员** |
|     **purchasePO**      | **时间、单据类型、单据状态、单据编号、供应商、仓库、操作员、入库商品列表、备注、总额合计** |
|       **salesPO**       | **时间、单据类型、单据状态、单据编号、客户、业务员、操作员、仓库、出库商品清单、折让前总额、折让、使用代金券金额、折让后总额、备注** |
|      **accountPO**      |              **账户名称、金额、时间**              |
|     **goodsItemPO**     |        **商品编号、名称、型号、数量、单价、金额、备注**        |
|    **accountBillPO**    |   **时间，单据状态，单据编号，单据类型，客户，操作员，转账列表，总额**   |
|  **accountBillItemPo**  |             **银行账户，转账金额，备注**             |
|     **cashBillPO**      | **时间，单据状态，单据编号，单据类型，操作员，银行账户，条目清单，总额。**  |
|   **cashBillItemPO**    |              **条目名，金额，备注**               |
|    **initAccountPO**    | **初始化时间，商品信息（商品分类，某一商品名称，类别，型号，进价，售价，最近进价，最近售价），客户信息（客户分类，编号、分类、级别、姓名、电话、地址、邮编、电子邮箱、应收额度、应收、应付、默认业务员某一客户名称，联系方式，应收应付），银行账户信息（名称，余额）** |
|       **userPO**        |        **员工姓名，员工职位，员工权限，员工账号，密码**        |
| **promotionCustomerPO** |     **赠品单，客户等级，代金券，开始时间，结束时间，折让价格**      |
| **promotionBargainPO**  |     **特价包商品，特价包原总价，特价包定价，开始时间，结束时间**     |
|  **promotionTotalPO**   |        **总额设置，赠品单，代金券，开始时间，结束时间**        |



## 6.2 数据库表

数据库中包含Classification表、Goods表、InventoryBill表、Customer表、Purchase表、Sales表、Account表、GoodsItem表、AccountBill表、AccountBillItem表、CashBill表、CashBillItem表、InitAccount表、User表、PromotionCustomer表、PromotionBargain表、PromotionTotal表