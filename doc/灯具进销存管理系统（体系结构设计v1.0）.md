# 灯具进销存管理系统（体系结构设计v1.0）

## 学院

南京大学软件学院

# 成员

乐盛捷，胡本霖，仲于芯，朱雨欣

# 目录

[TOC]

# 更新历史

# 1.引言

## 1.1编制目的

本报告详细完成对灯具进销存管理系统（Management System of Lamps）的概要设计，达到指导详细设计和开发的目的，同时实现和测试人员及用户的沟通。

本报告面向开发人员、测试人员及最终用户而编写，是了解系统的导航。

## 1.2词汇表

| 词汇名称  |   词汇含义    |  备注  |
| :---: | :-------: | :--: |
|  MSL  | 灯具进销存管理系统 |      |
|  _ui  |   某展示层    |      |
|  _bl  |   某逻辑层    |      |
| _data |   某数据层    |      |


## 1.3参考资料

1.IEEE 标准

2.《软件工程与计算（卷二）》附录D.3 连锁商店管理系统（MSCS）软件体系结构描述文档


# 2.产品概述

  灯具进销存管理系统是一民营企业聘请公司s开发的一套进销存系统，旨在适应新的市场环境，提高工作效率和用户满意度，由于现公司规模扩大，企业业务量、办公场所、员工数都发生增长，灯具进销存管理系统能够减少挤压库存，增加销售额，提高用户工作效率。

# 3.逻辑视角

  灯具进销存管理系统MSL中，选择了分层体系结构风格，将系统分成3层（展示层、业务逻辑层、数据层）能够很好地示意整个高层抽象。展示层包含GUI页面的实现，业务逻辑层包含业务逻辑处理的实现，数据层负责数据的持久化和访问。分层体系结构的逻辑视⻆角和逻辑设计⽅方案如图 3-1 和图 3-2 所示。 

* 图 3-1 参照体系结构风格的包图表达逻辑视角

![图 3-1](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE%203-1.png)

* 图 3-2 软件体系结构逻辑设计方案

![图 3-2](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE%203-2.png)

# 4.组合视角

## 4.1 开发包图

灯具进销存管理系统的最终开发包设计如表 4.1-1所示

- 表 4.1-1 灯具进销存管理系统的最终开发包设计

| 开发（物理）包                   | 依赖的其他开发包                                 |
| ------------------------- | ---------------------------------------- |
| mainui                    | inventoryui,customerui,salesui,accountui,financeui,userui,goodsui,initializationui,examinationui,promotionui,vo |
| inventoryui               | inventoryblservice,界面类库包,vo              |
| inventoryblservice        |                                          |
| inventorybl               | inventoryblservice,inventorydataservice,goodsbl |
| inventorydataservice      | Java RMI,po                              |
| inventorydata             | inventorydataservice,po,databaseutility  |
| classificationui          | classificationblservice,界面类库包,vo         |
| classificationblservice   |                                          |
| classificationbl          | classificationblservice，classficationdataservice |
| classificationdataservice | Java RMI,po                              |
| classificationdata        | classificationdataservice,po,databaseutility |
| customerui                | customerblservice,界面类库包,vo               |
| customerblservice         |                                          |
| customerbl                | customerblservice,customerdataservice    |
| customerdataservice       | Java RMI,po                              |
| customerdata              | customerdataservice,po,databaseutility   |
| salesui                   | salesblservice,界面类库包,vo                  |
| salesblservice            |                                          |
| salesbl                   | salesblservice,salesdataservice,userbl,customerbl,inventorybl,promotionbl,goodsbl |
| salesdataservice          | Java RMI,po                              |
| salesdata                 | salesdataservice,po,databaseutility      |
| accountui                 | accountblservice,界面类库包,vo                |
| accountblservice          |                                          |
| accountbl                 | accountblservice,accountdataservice      |
| accountdataservice        | Java RMI,po                              |
| accountdata               | accountdataservice,po,databaseutility    |
| financeui                 | financeblservice,界面类库包,vo                |
| financeblservice          |                                          |
| financebl                 | financeblservice,financedataservice,goodsbl,customerbl,accountbl,userbl,inventorybl, |
| financedataservice        | Java RMI,po                              |
| financedata               | financedataservice,po,databaseutility    |
| userui                    | userblservice,界面类库包,vo                   |
| userblservice             |                                          |
| userbl                    | userblservice,userdataservice            |
| userdataservice           | Java RMI,po                              |
| userdata                  | userdataservice,po,databaseutility       |
| goodsui                   | goodsblservice,界面类库包,vo                  |
| goodsblservice            |                                          |
| goodsbl                   | goodsblservice,goodsdataservice,classificationbl |
| goodsdataservice          | Java RMI,po                              |
| goodsdata                 | goodsdataservice,po,databaseutility      |
| initializationui          | initializationblservice,界面类库包,vo         |
| initializationblservice   |                                          |
| initializationbl          | initializationblservice,initializationbl,accountbl,customerbl,goodsbl |
| initializationdataservice | Java RMI,po                              |
| initializationdata        | initializationdataservice,po,databaseutility |
| examinationui             | examinationblservice,界面类库包,vo            |
| examinationblservice      |                                          |
| examinationbl             | examinationblservice,examinationdataservice,financebl,salsbl,inventorybl |
| examinationdataservice    | Java RMI,po                              |
| examinationdata           | examinationdataservice,po,databaseutility |
| promotionui               | promotionblservice,界面类库包,vo              |
| promotionblservice        |                                          |
| promotionbl               | promotionblservice,promotiondataservice  |
| promotiondataservice      | Java RMI,po                              |
| promotiondata             | promotiondataservice,po,databaseutility  |
| vo                        |                                          |
| po                        |                                          |
| utilitybl                 |                                          |
| 界面类库包                     | javafx                                   |
| Java RMI                  |                                          |
| databaseutili             | JDBC                                     |

灯具进销存管理系统客户端开发包如图 4.1-1所示，服务器端开发包如图 4.1-2所示。

* 图 4.1-1 灯具进销存管理系统客户端开发包图

![图 4.1-1](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BC%80%E5%8F%91%E5%8C%85%E5%9B%BE.png)

* 图 4.1-2 灯具进销存管理系统服务器端开发包图

![图 4.1-2](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%BC%80%E5%8F%91%E5%8C%85%E5%9B%BE.png)

## 4.2 运行时进程

在灯具进销存管理系统中，会有多个客户端进程和一个服务器端进程， 其进程图如图 4.2-1所示。结合部署图，客户端进程是在客户端机器上运行，服务器端进程在服务器端机器上运行。

* 图 4.2-1 进程图

![图 4.2-1](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE%204.2-1.png)

## 4.3 物理部署

灯具进销存管理系统中客户端构件是放在客户端机器上，服务器端构件是放在服务器端机器上。在客户端节点上，还要部署RMIStub 构件。由于Java RMI 构件属于JDK 8.0 的一部分。所以，在系统JDK环境已经设置好的情况下，不需要再独立部署。部署图如图4.3-1所示。

* 图 4.3-1 部署图

![图 4.3-1](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE%204.3-1.png)

# 5.接口视角

## 5.1 模块的职责

客户端模块和服务器端模块视图分别如图5.1-1和图5.1-2所示。客户端各层和服务器端各层的职责分表如表5.1-1和表5.1-2所示。

* 图 5.1-1 客户端模块视图

![图 5.1-1](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%A8%A1%E5%9D%97%E8%A7%86%E5%9B%BE.png)

* 图 5.1-2 服务器端模块视图

  ![图 5.1-2](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%A8%A1%E5%9D%97%E8%A7%86%E5%9B%BE.png)

* 表 5.1-1  客户端各层的职责

| 层       | 职责                   |
| ------- | -------------------- |
| 启动模块    | 负责初始化网络通信机制，启动用户界面   |
| 用户界面层   | 基于窗口的灯具进销存管理系统用户界面   |
| 业务逻辑层   | 对于用户界面的输入响应和业务处理逻辑   |
| 客户端网络模块 | 利用Java RMI 机制查找RMI服务 |
  ​  

* 表 5.1-2 服务器端各层的职责

| 层        | 职责                          |
| -------- | --------------------------- |
| 启动模块     | 负责初始化网络通信机制，启动用户界面          |
| 数据层      | 负责数据的持久化及数据访问接口             |
| 服务器端网络模块 | 利用Java RMI机制开启RMI服务，注册RMI服务 |

  每一层只是使用下方直接解除的层。层与层之间仅仅是通过接口的调用来完成的。层之间调用的接口如表5.1-3所示。

* 表 5.1-3  层之间调用的接口

| 接口                                       | 服务调用方    | 服务提供方    |
| ---------------------------------------- | -------- | -------- |
| InventoryBLService<br>CustomerBLService<br>SalesBLService<br>AccountBLService<br>FinanceBLService<br>UserBLService<br>GoodsBLService<br>InitializationBLService<br>ExaminationBLService<br> | 客户端展示层   | 客户端业务逻辑层 |
| InventoryDataService<br>CustomerDataService<br>SalesDataService<br>AccountDataService<br>FinanceDataService<br>UserDataService<br>GoodsDataService<br>ExaminationDataService<br>PromotionDataService<br>DatabaseFactory<br> | 客户端业务逻辑层 | 服务器端数据层  |

## 5.2 用户界面层的分解

根据需求，系统存在28个用户界面：登录界面、库存管理人员主界面、财务人员主界面、进货销售人员主界面、总经理主界面、管理员主界面、查看商品分类界面、查看商品界面、查看库存界面、制定库存报溢单界面、制定库存报损单界面、盘点库存界面、制定收款单界面、制定付款单界面、制定现金费用单界面、期初建账界面、管理账户界面、查看经营情况表界面、查看经营历程表界面、查看销售明细表界面、管理客户界面、制定进货单界面、制定退货单界面、制定销售出货单界面、制定销售退货单界面、制定促销策略界面、审批单据界面、管理用户账户和权限界面。界面跳转如图 5.2-1所示。

* 图 5.2-1 用户界面跳转

![图 5.2-1](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE%205.2-1.png)

服务器端和客户端的用户界面设计接口是一致的，只是具体的页面不一样。用户界面类如图 5.2-2所示。

* 图 5.2-2 用户界面类

  ![图 5.2-2](http://101.37.19.32:10080/horizon/LampManager/raw/develop/doc/img/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE%205.2-2.png)

### 5.2.1 用户界面层模块的职责

如表 5.2.1-1所示为用户界面层模块的职责。

* 表 5.2.1-1 用户界面层模块的职责

  | 模块        | 职责                    |
  | --------- | --------------------- |
  | MainFrame | 界面Frame，负责界面的显示和界面的跳转 |

### 5.2.2 用户界面层模块的接口规范

用户界面层模块的接口规范如表 5.2.1-2所示。

- 表 5.2.1-2 用户界面层模块的接口规范

  | 服务名                                 | 服务                |
  | ----------------------------------- | ----------------- |
  | businesslogicservice.LoginBLService | 登录界面的业务逻辑接口       |
  | businesslogicservice.*BLService     | 每个界面都有一个相应的业务逻辑接口 |

### 5.2.3 用户界面层模块设计原理

用户界面利用Java的 JavaFX来实现。

## 5.3 业务逻辑层的分解

### 5.3.1业务逻辑层模块的职责

### 5.3.2 业务逻辑层模块的接口规范
* 表5.3.2-4 accountbl模块的接口规范
<table>
	<tr>
		<th colspan="3" align="center">提供的服务（供接口）</th>
	</tr>
	<tr>
    	<td rowspan="3">Account.addAccount</td>
        <td>语法</td>
        <td>public ResultMessage addAccount(string name,double money);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>name和money符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统添加新的银行账户，持久化更新涉及的领域对象的数据</td>
    </tr>
    <tr>
    	<td rowspan="3">Account.findAccount</td>
        <td>语法</td>
        <td>public ArrayList&lt;AccountVO&gt; findAccount(string keyword);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>keyword符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回查找到的银行账户</td>
    </tr>
    <tr>
    	<td rowspan="3">Account.deleteAccount</td>
        <td>语法</td>
        <td>public ResultMessage deleteAccount(String name);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>name符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统删除指定的银行账户，持久化更新涉及的领域对象的数据</td>
    </tr>
        <tr>
    	<td rowspan="3">Account.updateAccount</td>
        <td>语法</td>
        <td>public ResultMessage updateAccount(String name，double money);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>财务人员需要更新银行账户信息</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统更新指定的银行账户，并返回结果</td>
    </tr>
    
    <tr>
    	<th colspan="3" align="center">需要的服务（需接口）</th>
    </tr>
    <tr>
    <th>服务名</th>
    <th colspan="2">服务</th>
    </tr>
    <tr>
    <td>AccountDataService.find(String id)</td>
    <td colspan="2">根据id进行查找单一持久化对象</td>
    </tr>
     <tr>
    <td>AccountDataService.find(String name)</td>
    <td colspan="2">根据名称进行查找单一持久化对象</td>
    </tr>
    <tr>
    <td>AccountDataService.add(AccountPO po)</td>
    <td colspan="2">添加单一持久化对象</td>
    </tr>
    <tr>
    <td>AccountDataService.update(AccountPO po)</td>
    <td colspan="2">更新单一持久化对象</td>
    </tr>
    <tr>
    <td>AccountDataService.delete(AccountPO po)</td>
    <td colspan="2">删除单一持久化对象</td>
    </tr>
    <tr>
    <td>AccountDataService.getAll()</td>
    <td colspan="2">返回所有单一持久化对象</td>
    </tr>
</table>
* 表5.3.2-5 financebl模块的接口规范
<table>
	<tr>
		<th colspan="3" align="center">提供的服务（供接口）</th>
	</tr>
	<tr>
    	<td rowspan="3">Finance.getReceiptID</td>
        <td>语法</td>
        <td>public String getReceiptID();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>请求新建收款单</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回新建收款单的ID</td>
    </tr>
    	<tr>
    	<td rowspan="3">Finance.getPaymentID</td>
        <td>语法</td>
        <td>public String getPaymentID();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>请求新建付款单</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回新建付款单的ID</td>
    </tr>
    <tr>
    	<td rowspan="3">Finance.getCashBillID</td>
        <td>语法</td>
        <td>public String getCashBillID();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>请求新建现金费用单</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回新建现金费用单的ID</td>
    </tr>
    <tr>
    	<td rowspan="3">Finance.getUserID</td>
        <td>语法</td>
        <td>public String getUserID();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>请求新建收、付款/现金费用单据</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回当前用户ID</td>
    </tr>
    <tr>
    	<td rowspan="3">Finance.addAccountBillItem</td>
        <td>语法</td>
        <td>public ResultMessage addAccountBillItem(AccountBillItemVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统添加转账列表，持久化更新涉及的领域对象的数据</td>
    </tr>
     <tr>
    	<td rowspan="3">Finance.addCashBillItem</td>
        <td>语法</td>
        <td>public ResultMessage addCashBillItem(CashBillItemVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统添加条目清单，持久化更新涉及的领域对象的数据</td>
    </tr>
        <tr>
    	<td rowspan="3">Finance.addAccountBill</td>
        <td>语法</td>
        <td>public ResultMessage addAccountBill(AccountBillVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>单据信息输入符合规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统建立新的收付款单据，并返回结果</td>
    </tr>
        <tr>
    	<td rowspan="3">Finance.addCashBill</td>
        <td>语法</td>
        <td>public ResultMessage addCashBill(CashBillVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>单据信息输入符合规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统建立新的现金费用单据，并返回结果</td>
    </tr>
    <tr>
    	<td rowspan="3">Finance.getAllClients</td>
        <td>语法</td>
        <td>public ArrayList&lt;CustomerVO&gt; getAllCustomers();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>需要显示所有的客户</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回所有的客户列表</td>
    </tr>
    <tr>
    	<td rowspan="3">Finance.getAllAccounts</td>
        <td>语法</td>
        <td>public ArrayList&lt;AccountVO&gt; getAllAccounts();</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>需要显示所有的银行账户</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回所有的银行账户列表</td>
    </tr>
    <tr>
    	<td rowspan="3">Finance.save</td>
        <td>语法</td>
        <td>public ResultMessage save(BillVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>填写部分信息但不提交，需要保存草稿</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统保存草稿单据，返回结果</td>
    </tr>
     <tr>
    	<td rowspan="3">Finance.submit</td>
        <td>语法</td>
        <td>public ResultMessage submit(BillVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>填写完整单据信息</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统提交单据</td>
    </tr>
     <tr>
    	<td rowspan="3">Finance.find</td>
        <td>语法</td>
        <td>public AccountBillVO find(String id);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>id符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回指定的单据</td>
    </tr>
     <tr>
    	<td rowspan="3">Finance.getSaleDetails</td>
        <td>语法</td>
        <td>public SaleDetailVO getSaleDetails(Date startDate，Date endDate，String goodName, String customerName, String salesmanName, String inventoryName);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回符合条件的销售明细表</td>
    </tr>
     <tr>
    	<td rowspan="3">Finance.getSalesDetails</td>
        <td>语法</td>
        <td>public ArrayList&lt;SalesDetailVO&gt; getSalesDetails(Date startDate，Date endDate，String goodName, String customerName, String salesmanName, String inventoryName);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回符合条件的销售明细表</td>
    </tr>
     <tr>
    	<td rowspan="3">Finance.getDocumentDetails</td>
        <td>语法</td>
        <td>public DocumentDetailsVO getDocumentDetails(Date startDate，Date endDate，String billType, String customerName, String salesmanName, String inventoryName);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回符合条件的经营历程表</td>
    </tr>
     <tr>
    	<td rowspan="3">Finance.getDocumentDetails</td>
        <td>语法</td>
        <td>public DocumentDetailsVO getDocumentDetails(Date startDate，Date endDate，String billType, String customerName, String salesmanName, String inventoryName);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回符合条件的经营历程表</td>
    </tr>
     <tr>
    	<td rowspan="3">Finance.getProfit</td>
        <td>语法</td>
        <td>public ProfitVO getProfit(Date startDate，Date endDate);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>startDate和endDate符合输入规则</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统返回时间区间内的经营情况表</td>
    </tr>
     <tr>
    	<td rowspan="3">Finance.redCover</td>
        <td>语法</td>
        <td>public ResultMessage redCover(BillVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>选中某张单据请求红冲</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统将指定单据红冲</td>
    </tr>
     <tr>
    	<td rowspan="3">Finance.redCopy</td>
        <td>语法</td>
        <td>public ResultMessage redCopy(BillVO vo);</td></tr>
    <tr>
    	<td>前置条件</td>
        <td>选中某张单据请求红冲并复制</td></tr>
    <tr>
   		<td>后置条件</td>
        <td>系统将指定单据红冲并复制</td>
    </tr>
    <tr>
    	<th colspan="3" align="center">需要的服务（需接口）</th>
    </tr>
    <tr>
    <th>服务名</th>
    <th colspan="2">服务</th>
    </tr>
    <tr>
    <td>FinanceDataService.find(String id)</td>
    <td colspan="2">根据id进行查找单一持久化对象</td>
    </tr>
    <tr>
    <td>FinanceDataService.addAccountBill(PO po)</td>
    <td colspan="2">添加单一持久化对象</td>
    </tr>
    <tr>
    <td>FinanceDataService.update(PO po)</td>
    <td colspan="2">更新单一持久化对象</td>
    </tr>
     <tr>
    <td>FinanceDataService.delete(PO po)</td>
    <td colspan="2">删除指定的单一持久化对象</td>
    </tr>
     <tr>
    <td>FinanceDataService.getAll()</td>
    <td colspan="2">返回所有单一持久化对象</td>
    </tr>
     <tr>
    <td>FinanceDataService.getReceiptID()</td>
    <td colspan="2">返回新建的收款单ID</td>
    </tr>
    <tr>
    <td>FinanceDataService.getPaymentID()</td>
    <td colspan="2">返回新建的付款单ID</td>
    </tr>
     <tr>
    <td>FinanceDataService.getCashBillID()</td>
    <td colspan="2">返回新建的现金费用单ID</td>
    </tr>
      <tr>
    <td>FinanceDataService.getUserID()</td>
    <td colspan="2">返回当前用户ID</td>
    </tr>
    
</table>

## 5.4 数据层的分解

### 5.4.1 数据层模块的职责

### 5.4.2 数据层模块的接口规范

# 6. 信息视角

## 6.1 数据持久化对象

系统的PO类就是对应的相关的实体类，如表 6.1-1所示

* 表 6.1-1 数据持久化对象


|           类名            |                  包含的属性                   |
| :---------------------: | :--------------------------------------: |
|         **PO**          |         **PO类的父类，存在PO会使用的共同方法 **         |
|  **classificationPO**   |        **编号、名称、父分类、子分类、包含商品的ID**         |
|       **goodsPO**       | **编号、名称、型号、数量、进价、零售价、最近进价、最近零售价、所属分类、警戒数量、所属仓库** |
|   **inventoryBillPO**   | **编号、单据类型、单据状态、时间、商品名称、商品型号、商品所属仓库、商品溢出/缺损数量** |
|     **customerPO**      | **编号、分类、级别、姓名、电话、地址、邮编、电子邮箱、应收额度、应收、应付、默认业务员** |
|     **purchasePO**      | **时间、单据类型、单据状态、单据编号、供应商、仓库、操作员、入库商品列表、备注、总额合计** |
|       **salesPO**       | **时间、单据类型、单据状态、单据编号、客户、业务员、操作员、仓库、出库商品清单、折让前总额、折让、使用代金券金额、折让后总额、备注** |
|      **accountPO**      |              **账户名称、金额、时间**              |
|     **goodsItemPO**     |        **商品编号、名称、型号、数量、单价、金额、备注**        |
|    **accountBillPO**    |   **时间，单据状态，单据编号，单据类型，客户，操作员，转账列表，总额**   |
|  **accountBillItemPo**  |             **银行账户，转账金额，备注**             |
|     **cashBillPO**      | **时间，单据状态，单据编号，单据类型，操作员，银行账户，条目清单，总额。**  |
|   **cashBillItemPO**    |              **条目名，金额，备注**               |
|    **initAccountPO**    | **初始化时间，商品信息（商品分类，某一商品名称，类别，型号，进价，售价，最近进价，最近售价），客户信息（客户分类，编号、分类、级别、姓名、电话、地址、邮编、电子邮箱、应收额度、应收、应付、默认业务员某一客户名称，联系方式，应收应付），银行账户信息（名称，余额）** |
|       **userPO**        |        **员工姓名，员工职位，员工权限，员工账号，密码**        |
| **promotionCustomerPO** |     **赠品单，客户等级，代金券，开始时间，结束时间，折让价格**      |
| **promotionBargainPO**  |     **特价包商品，特价包原总价，特价包定价，开始时间，结束时间**     |
|  **promotionTotalPO**   |        **总额设置，赠品单，代金券，开始时间，结束时间**        |



## 6.2 数据库表

数据库中包含Classification表、Goods表、InventoryBill表、Customer表、Purchase表、Sales表、Account表、GoodsItem表、AccountBill表、AccountBillItem表、CashBill表、CashBillItem表、InitAccount表、User表、PromotionCustomer表、PromotionBargain表、PromotionTotal表